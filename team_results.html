<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <title>Team Results</title>
  <style>
    .match {
      text-align : center ;
    }
  </style>
</head>
<body class="bg-light">

  <div class="container mt-5">
    <h1 class="mb-4">Team Results</h1>

    <table class="table table-striped" id="teamResultsTable">
      <thead class="thead-dark">
        <tr>
          <th>Date</th>
          <th>Location</th>
          <th>Team 1 Level</th>
          <th>Match</th>
          <th>Score</th>
          <th>Team 2 Level</th>
          <th></th>
          <th>Evolution</th>
        </tr>
      </thead>
      <tbody id="team-results-body">
        <!-- Results will be inserted here -->
      </tbody>
    </table>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Extract team name from the URL
      const teamName = decodeURIComponent(new URLSearchParams(window.location.search).get('team'));

      // Default JSON file path for team results (adjust as needed)
      const jsonFilePath = `data/json/matches/${teamName}.json`;

      // Function to load team results JSON file
      async function loadTeamResultsJSON(filePath) {
        const response = await fetch(filePath);
        const jsonData = await response.json();
        return jsonData;
      }

      // Reference to team results table body
      const teamResultsBody = document.getElementById('team-results-body');

      // Initial JSON loading
      loadTeamResultsJSON(jsonFilePath).then(teamResultsData => {
        console.log('Team Results Data:', teamResultsData);
        const matchesArray = teamResultsData.matches || [];
        // Loop through team results data and construct table rows
        matchesArray.forEach(match => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${match.date}</td>
            <td>${match.city} (${match.country})</td>
            <td>${match.tournament}</td>
            <td>${Math.round(match.rating1)}</td>
            <td>${match.team1} vs ${match.team2}</td>
            <td class="match">${match.score1} - ${match.score2}</td>
            <td>${Math.round(match.rating2)}</td>
            <td>${Math.round(match.rating_ev)}</td>
          `;
          teamResultsBody.appendChild(row);
        });
      });
    });
  </script>
</body>
</html>
